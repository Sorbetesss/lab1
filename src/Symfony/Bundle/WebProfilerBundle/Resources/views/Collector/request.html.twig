{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set request_handler %}
        {% if collector.controller.class is defined %}
            {% set link = collector.controller.file|file_link(collector.controller.line) %}
            {% if collector.controller.method %}
                <span class="sf-toolbar-info-class sf-toolbar-info-with-next-pointer">{{ collector.controller.class|abbr_class }}</span>
                <span class="sf-toolbar-info-method" onclick="{% if link %}window.location='{{link|e('js')}}';window.event.stopPropagation();return false;{% endif %}">
                    {{ collector.controller.method }}
                </span>
            {% else %}
                <span class="sf-toolbar-info-class" onclick="{% if link %}window.location='{{link|e('js')}}';window.event.stopPropagation();return false;{% endif %}">{{ collector.controller.class|abbr_class }}</span>
            {% endif %}
        {% else %}
            <span class="sf-toolbar-info-class">{{ collector.controller }}</span>
        {% endif %}
    {% endset %}
    {% set request_status_code_color = (400 > collector.statuscode) ? ((200 == collector.statuscode) ? 'green' : 'yellow') : 'red'%}
    {% set request_route = collector.route ? collector.route : 'NONE' %}
    {% set icon %}
        <img width="28" height="28" alt="Request" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjggMjgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI4IDI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSIjM0YzRjNGIiBkPSJNMTkuNSAxOGMwIDAuMiAwIDAuNSAwLjEgMC44Yy0wLjggMC43LTEuMiAxLjItMS4zIDEuM2MwIDAgMCAwLjEgMCAwLjFjMC43IDEgMS4xIDEuNCAxLjEgMS40IGMwLjEgMCAwLjMtMC4xIDAuOC0wLjNjMC40LTAuMiAwLjgtMC40IDAuOS0wLjVjMC4xIDAuMSAwLjMgMC4xIDAuMyAwLjJjMC4xIDAgMC4yIDAuMSAwLjQgMC4xYzAgMC4yIDAuMSAwLjYgMC4zIDEgYzAuMSAwLjUgMC4yIDAuNyAwLjMgMC44YzAgMCAwLjYtMC4xIDEuOC0wLjJjMCAwIDAuMSAwIDAuMS0wLjFjMC4xLTAuMiAwLjEtMC44IDAuMS0xLjljMC4yLTAuMSAwLjQtMC4zIDAuNi0wLjUgYzEuMiAwLjQgMS44IDAuNSAxLjkgMC40bDAuNy0xLjZsMCAwYzAuMS0wLjEtMC41LTAuNS0xLjYtMS4xYzAtMC4zIDAtMC41LTAuMS0wLjhjMC44LTAuNyAxLjItMS4yIDEuMy0xLjNjMCAwIDAtMC4xIDAtMC4xIGMtMC43LTAuOS0xLjEtMS40LTEuMS0xLjRsLTAuMSAwYy0wLjUgMC4yLTEgMC41LTEuNiAwLjhjLTAuMS0wLjEtMC4zLTAuMS0wLjMtMC4yYy0wLjEgMC0wLjItMC4xLTAuNC0wLjFjMC0wLjItMC4xLTAuNi0wLjMtMSBjLTAuMS0wLjUtMC4yLTAuNy0wLjMtMC44YzAgMC0wLjIgMC0wLjQgMGMtMC4zIDAtMC42IDAuMS0wLjkgMC4xYy0wLjMgMC0wLjUgMC4xLTAuNSAwLjFjMCAwLTAuMSAwLTAuMSAwLjEgYy0wLjEgMC4yLTAuMSAwLjgtMC4xIDEuOWMtMC4yIDAuMS0wLjQgMC4zLTAuNiAwLjVjLTEuMi0wLjQtMS44LTAuNS0xLjktMC40bC0wLjcgMS42QzE3LjkgMTcgMTguNCAxNy40IDE5LjUgMTh6IE0yMi4yIDE2LjUgYzAuNC0wLjIgMC44LTAuMiAxLjIgMGMwLjQgMC4yIDAuNyAwLjUgMC45IDAuOWMwLjIgMC40IDAuMiAwLjggMCAxLjJjLTAuMiAwLjQtMC41IDAuNy0wLjkgMC45Yy0wLjQgMC4yLTAuOCAwLjItMS4yIDAgYy0wLjQtMC4yLTAuNy0wLjUtMC45LTAuOWMtMC4yLTAuNC0wLjItMC44IDAtMS4yQzIxLjQgMTcgMjEuNyAxNi43IDIyLjIgMTYuNXoiLz48cGF0aCBmaWxsPSIjM0YzRjNGIiBkPSJNMTguOSAxMS4yYzAtMC4xIDAtMC4yLTAuMS0wLjNjLTAuMS0wLjEtMC4yLTAuMS0wLjMtMC4ybC0yLjItMC4zYy0wLjEtMC4zLTAuMy0wLjctMC41LTEuMiBDMTYgOSAxNi4yIDguNyAxNi41IDguM3MwLjUtMC42IDAuNi0wLjhjMC4xLTAuMSAwLjEtMC4yIDAuMS0wLjNjMC0wLjMtMC43LTEuMS0yLjEtMi40Yy0wLjEtMC4xLTAuMi0wLjEtMC4zLTAuMSBjLTAuMSAwLTAuMiAwLTAuMyAwLjFsLTEuNyAxLjNjLTAuNC0wLjItMC44LTAuNC0xLjEtMC41bC0wLjMtMi4zYzAtMC4xLTAuMS0wLjItMC4xLTAuM0MxMSAzLjEgMTAuOSAzIDEwLjggM0g4LjEgQzcuOSAzIDcuNyAzLjIgNy42IDMuNEM3LjUgMy45IDcuNCA0LjYgNy4zIDUuN0M2LjkgNS44IDYuNSA2IDYuMiA2LjJMNC41IDQuOEM0LjQgNC44IDQuMyA0LjcgNC4yIDQuN0M0IDQuNyAzLjYgNSAzIDUuNiBjLTAuNiAwLjYtMSAxLTEuMiAxLjNDMS43IDcgMS43IDcuMSAxLjcgNy4yYzAgMC4xIDAgMC4yIDAuMSAwLjNjMC42IDAuNyAxIDEuMiAxLjMgMS43QzIuOSA5LjYgMi43IDEwIDIuNiAxMC4zbC0yLjMgMC40IGMtMC4xIDAtMC4yIDAuMS0wLjIgMC4yQzAgMTAuOSAwIDExIDAgMTEuMXYyLjdjMCAwLjEgMCAwLjIgMC4xIDAuM2MwLjEgMC4xIDAuMiAwLjEgMC4zIDAuMWwyLjIgMC40YzAuMSAwLjQgMC4zIDAuOCAwLjUgMS4yIGMtMC4yIDAuMi0wLjQgMC41LTAuNyAwLjljLTAuMyAwLjQtMC41IDAuNi0wLjYgMC44Yy0wLjEgMC4xLTAuMSAwLjItMC4xIDAuM2MwIDAuMyAwLjcgMS4xIDIuMSAyLjRjMC4xIDAuMSAwLjIgMC4xIDAuMyAwLjEgYzAuMSAwIDAuMiAwIDAuMy0wLjFsMS43LTEuM2MwLjQgMC4yIDAuOCAwLjQgMS4xIDAuNWwwLjMgMi4zYzAgMC4xIDAuMSAwLjIgMC4xIDAuM0M3LjkgMjEuOSA4IDIyIDguMSAyMmgyLjggYzAuMiAwIDAuNC0wLjEgMC40LTAuNGMwLjEtMC41IDAuMi0xLjIgMC4zLTIuM2MwLjQtMC4xIDAuOC0wLjMgMS4xLTAuNWwxLjcgMS4zYzAuMSAwLjEgMC4yIDAuMSAwLjMgMC4xYzAuMiAwIDAuNi0wLjMgMS4yLTAuOSBjMC42LTAuNiAxLTEgMS4yLTEuM2MwLjEtMC4xIDAuMS0wLjIgMC4xLTAuM2MwLTAuMSAwLTAuMi0wLjEtMC4zYy0wLjYtMC43LTEtMS4yLTEuMy0xLjdjMC4yLTAuNCAwLjQtMC44IDAuNS0xLjFsMi4zLTAuNCBjMC4xIDAgMC4yLTAuMSAwLjItMC4yYzAuMS0wLjEgMC4xLTAuMiAwLjEtMC4zTDE4LjkgMTEuMkwxOC45IDExLjJ6IE0xMi4xIDE1LjJjLTAuNyAwLjctMS42IDEuMS0yLjcgMS4xcy0xLjktMC40LTIuNy0xLjEgYy0wLjctMC43LTEuMS0xLjYtMS4xLTIuN1M2IDEwLjYgNi44IDkuOGMwLjctMC43IDEuNi0xLjEgMi43LTEuMXMxLjkgMC40IDIuNyAxLjFjMC43IDAuNyAxLjEgMS42IDEuMSAyLjdTMTIuOSAxNC40IDEyLjEgMTUuMnoiLz48Y2lyY2xlIGZpbGw9IiMzRjNGM0YiIGN4PSI5LjUiIGN5PSIxMi41IiByPSIyIi8+PC9zdmc+" />
        <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}" title="{{ collector.statustext }}">{{ collector.statuscode }}</span>
        <span class="sf-toolbar-status sf-toolbar-info-piece-additional">{{ request_handler }}</span>
        <span class="sf-toolbar-info-piece-additional-detail">on <i>{{ request_route }}</i></span>
    {% endset %}
    {% set text %}
        {% spaceless %}
            <div class="sf-toolbar-info-piece">
                <b>Status</b>
                <span class="sf-toolbar-status sf-toolbar-status-{{ request_status_code_color }}">{{ collector.statuscode }}</span> {{ collector.statustext }}
            </div>
            <div class="sf-toolbar-info-piece">
                <b>Controller</b>
                {{ request_handler }}
            </div>
            <div class="sf-toolbar-info-piece">
                <b>Route name</b>
                <span>{{ request_route }}</span>
            </div>
            <div class="sf-toolbar-info-piece">
                <b>Has session</b>
                <span>{% if collector.sessionmetadata|length %}yes{% else %}no{% endif %}</span>
            </div>
        {% endspaceless %}
    {% endset %}
    {% include '@WebProfiler/Profiler/toolbar_item.html.twig' with { 'link': profiler_url } %}
{% endblock %}

{% block menu %}
<span class="label">
    <span class="icon"><img width="38" height="28" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzggMjgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDM4IDI4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBmaWxsPSIjM0YzRjNGIiBkPSJNMjYuNyAyMC41YzAgMC4zIDAgMC43IDAuMSAxYy0xLjEgMS0xLjYgMS42LTEuOCAxLjhjMCAwIDAgMC4xIDAgMC4xYzEgMS4zIDEuNSAyIDEuNSAyIGMwLjEgMCAwLjQtMC4xIDEuMS0wLjRjMC42LTAuMyAxLTAuNiAxLjMtMC43YzAuMiAwLjEgMC40IDAuMiAwLjUgMC4yYzAuMSAwIDAuMyAwLjEgMC41IDAuMmMwLjEgMC4zIDAuMiAwLjggMC40IDEuNCBzMC4zIDEgMC40IDEuMWMwIDAgMC44LTAuMSAyLjUtMC4zYzAuMSAwIDAuMSAwIDAuMS0wLjFjMC4xLTAuMyAwLjItMS4xIDAuMS0yLjVjMC4zLTAuMiAwLjYtMC40IDAuOC0wLjZjMS42IDAuNSAyLjUgMC43IDIuNiAwLjUgbDEtMi4ybDAgMGMwLjEtMC4yLTAuNi0wLjctMi4yLTEuNWMwLTAuNCAwLTAuNy0wLjEtMWMxLjEtMSAxLjYtMS42IDEuOC0xLjhjMCAwIDAtMC4xIDAtMC4xYy0xLTEuMy0xLjQtMS45LTEuNS0ybC0wLjEgMCBjLTAuNiAwLjItMS40IDAuNi0yLjIgMS4yYy0wLjItMC4xLTAuNC0wLjItMC41LTAuMmMtMC4xIDAtMC4zLTAuMS0wLjUtMC4yYy0wLjEtMC4zLTAuMi0wLjgtMC40LTEuNGMtMC4yLTAuNy0wLjMtMS0wLjQtMS4xIGMwIDAtMC4yIDAtMC42IDBjLTAuNCAwLTAuOCAwLjEtMS4yIDAuMUMyOS40IDE0IDI5LjIgMTQgMjkuMiAxNGMtMC4xIDAtMC4xIDAtMC4xIDAuMWMtMC4xIDAuMy0wLjIgMS4xLTAuMSAyLjUgYy0wLjMgMC4yLTAuNiAwLjQtMC44IDAuNmMtMS42LTAuNS0yLjUtMC43LTIuNi0wLjVsLTEgMi4yQzI0LjUgMTkuMSAyNS4yIDE5LjYgMjYuNyAyMC41eiBNMzAuMyAxOC40YzAuNi0wLjIgMS4xLTAuMiAxLjcgMCBjMC42IDAuMiAwLjkgMC42IDEuMiAxLjJjMC4yIDAuNiAwLjIgMS4xIDAgMS43Yy0wLjIgMC42LTAuNiAxLTEuMiAxLjJjLTAuNiAwLjItMS4xIDAuMi0xLjcgMGMtMC42LTAuMi0xLTAuNi0xLjItMS4yIGMtMC4yLTAuNi0wLjItMS4xIDAtMS43QzI5LjMgMTkuMSAyOS43IDE4LjcgMzAuMyAxOC40eiIvPjxwYXRoIGZpbGw9IiMzRjNGM0YiIGQ9Ik0yNS45IDExLjFjMC0wLjEgMC0wLjMtMC4xLTAuNGMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJMMjIuMyAxMGMtMC4xLTAuNS0wLjQtMS0wLjctMS43IGMwLjItMC4zIDAuNS0wLjcgMC45LTEuMmMwLjQtMC41IDAuNy0wLjkgMC44LTEuMWMwLjEtMC4xIDAuMS0wLjMgMC4xLTAuNGMwLTAuNC0xLTEuNC0yLjktMy4yYy0wLjEtMC4xLTAuMy0wLjItMC40LTAuMiBjLTAuMiAwLTAuMyAwLTAuNCAwLjFsLTIuNCAxLjhjLTAuNi0wLjMtMS4xLTAuNS0xLjUtMC42bC0wLjUtMy4xYzAtMC4xLTAuMS0wLjMtMC4yLTAuNEMxNS4xIDAuMSAxNSAwIDE0LjggMGgtMy44IGMtMC4zIDAtMC41IDAuMi0wLjYgMC41Yy0wLjIgMC42LTAuMyAxLjctMC41IDMuMUM5LjQgMy44IDguOSA0IDguNCA0LjJMNi4xIDIuNEM2IDIuMyA1LjggMi4zIDUuNyAyLjNjLTAuMyAwLTAuOCAwLjQtMS42IDEuMiBDMy4zIDQuMyAyLjcgNC45IDIuNCA1LjNDMi4zIDUuNCAyLjMgNS41IDIuMyA1LjdjMCAwLjEgMCAwLjMgMC4xIDAuNEMzLjIgNyAzLjggNy44IDQuMiA4LjRDNCA5IDMuNyA5LjUgMy42IDEwbC0zLjEgMC41IGMtMC4xIDAtMC4yIDAuMS0wLjMgMC4yQzAgMTAuOCAwIDEwLjkgMCAxMS4xdjMuN2MwIDAuMSAwIDAuMyAwLjEgMC40YzAuMSAwLjEgMC4yIDAuMiAwLjMgMC4ybDMuMSAwLjVjMC4yIDAuNSAwLjQgMS4xIDAuNyAxLjcgYy0wLjIgMC4zLTAuNSAwLjctMSAxLjJjLTAuNCAwLjUtMC43IDAuOS0wLjggMS4xYy0wLjEgMC4xLTAuMSAwLjMtMC4xIDAuNGMwIDAuNCAxIDEuNCAyLjkgMy4yYzAuMSAwLjEgMC4zIDAuMiAwLjQgMC4yIGMwLjIgMCAwLjMgMCAwLjQtMC4xbDIuNC0xLjhDOSAyMiA5LjUgMjIuMiAxMCAyMi4zbDAuNSAzLjFjMCAwLjEgMC4xIDAuMyAwLjIgMC40YzAuMSAwLjEgMC4zIDAuMiAwLjQgMC4yaDMuOCBjMC4zIDAgMC41LTAuMiAwLjYtMC41YzAuMi0wLjYgMC4zLTEuNyAwLjUtMy4xYzAuNS0wLjIgMS4xLTAuNCAxLjYtMC42bDIuMyAxLjhjMC4xIDAuMSAwLjMgMC4xIDAuNCAwLjFjMC4zIDAgMC44LTAuNCAxLjYtMS4yIGMwLjgtMC44IDEuNC0xLjQgMS43LTEuOGMwLjEtMC4xIDAuMS0wLjIgMC4xLTAuNGMwLTAuMSAwLTAuMy0wLjEtMC40Yy0wLjgtMC45LTEuNC0xLjctMS44LTIuM2MwLjMtMC42IDAuNS0xLjEgMC42LTEuNWwzLjEtMC41IGMwLjEgMCAwLjItMC4xIDAuMy0wLjJjMC4xLTAuMSAwLjEtMC4zIDAuMS0wLjRMMjUuOSAxMS4xTDI1LjkgMTEuMXogTTE2LjYgMTYuNmMtMSAxLTIuMiAxLjUtMy43IDEuNXMtMi43LTAuNS0zLjctMS41IGMtMS0xLTEuNS0yLjItMS41LTMuN3MwLjUtMi43IDEuNS0zLjdjMS0xIDIuMi0xLjUgMy43LTEuNXMyLjcgMC41IDMuNyAxLjVjMSAxIDEuNSAyLjIgMS41IDMuN1MxNy42IDE1LjYgMTYuNiAxNi42eiIvPjxjaXJjbGUgZmlsbD0iIzNGM0YzRiIgY3g9IjEyLjkiIGN5PSIxMi45IiByPSIyLjgiLz48L3N2Zz4=" alt="Request"></span>
    <strong>Request</strong>
</span>
{% endblock %}

{% block panel %}
    <h2>Request GET Parameters</h2>

    {% if collector.requestquery.all|length %}
        {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestquery } only %}
    {% else %}
        <p>
            <em>No GET parameters</em>
        </p>
    {% endif %}

    <h2>Request POST Parameters</h2>

    {% if collector.requestrequest.all|length %}
        {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestrequest } only %}
    {% else %}
        <p>
            <em>No POST parameters</em>
        </p>
    {% endif %}

    <h2>Request Attributes</h2>

    {% if collector.requestattributes.all|length %}
        {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestattributes } only %}
    {% else %}
        <p>
            <em>No attributes</em>
        </p>
    {% endif %}

    <h2>Request Cookies</h2>

    {% if collector.requestcookies.all|length %}
        {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestcookies } only %}
    {% else %}
        <p>
            <em>No cookies</em>
        </p>
    {% endif %}

    <h2>Request Headers</h2>

    {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestheaders } only %}

    <h2>Request Content</h2>

    {% if collector.content == false %}
        <p><em>Request content not available (it was retrieved as a resource).</em></p>
    {% elseif collector.content %}
        <pre>{{ collector.content }}</pre>
    {% else %}
        <p><em>No content</em></p>
    {% endif %}

    <h2>Request Server Parameters</h2>

    {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.requestserver } only %}

    <h2>Response Headers</h2>

    {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': collector.responseheaders } only %}

    <h2>Session Metadata</h2>

    {% if collector.sessionmetadata|length %}
    {% include '@WebProfiler/Profiler/table.html.twig' with { 'data': collector.sessionmetadata } only %}
    {% else %}
    <p>
        <em>No session metadata</em>
    </p>
    {% endif %}

    <h2>Session Attributes</h2>

    {% if collector.sessionattributes|length %}
        {% include '@WebProfiler/Profiler/table.html.twig' with { 'data': collector.sessionattributes } only %}
    {% else %}
        <p>
            <em>No session attributes</em>
        </p>
    {% endif %}

    <h2>Flashes</h2>

    {% if collector.flashes|length %}
        {% include '@WebProfiler/Profiler/table.html.twig' with { 'data': collector.flashes } only %}
    {% else %}
        <p>
            <em>No flashes</em>
        </p>
    {% endif %}

    {% if profile.parent %}
        <h2><a href="{{ path('_profiler', { 'token': profile.parent.token }) }}">Parent request: {{ profile.parent.token }}</a></h2>

        {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': profile.parent.getcollector('request').requestattributes } only %}
    {% endif %}

    {% if profile.children|length %}
        <h2>Sub requests</h2>

        {% for child in profile.children %}
            <h3><a href="{{ path('_profiler', { 'token': child.token }) }}">{{ child.token }}</a></h3>
            {% include '@WebProfiler/Profiler/bag.html.twig' with { 'bag': child.getcollector('request').requestattributes } only %}
        {% endfor %}
    {% endif %}

{% endblock %}
