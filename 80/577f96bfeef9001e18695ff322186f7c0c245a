---------------------------------------------------------------------------

by fabpot at 2016-10-02T01:38:29Z

Have you check if this is the only place where we need that?

---------------------------------------------------------------------------

by lemoinem at 2016-10-02T02:04:02Z

@fabpot I grep'd through the Validator Component for `key()` or `current()`.

The only other time they are used is in the [`YamlFileLoader`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Validator/Mapping/Loader/YamlFileLoader.php#L86). And I don't think it's possible for this array to have a misplaced internal pointer (single element array, generated by the Yaml Parser).

---------------------------------------------------------------------------

by fabpot at 2016-10-02T02:06:50Z

I was thinking about the other components and bundles as well.

---------------------------------------------------------------------------

by lemoinem at 2016-10-02T02:09:26Z

I'll take a look.

---------------------------------------------------------------------------

by lemoinem at 2016-10-02T02:25:22Z

@fabpot I double checked the rest of symfony's code. As far as I can tell, all other uses of `current()` and `key()` are safe (most are on newly built arrays, the others are on arrays being iterated on).

---------------------------------------------------------------------------

by ro0NL at 2016-10-02T08:20:22Z

We should be careful though, it needs to be looked at on a per case basis.

I've double checked all subclasses, and overridden constructors are good to go.
