---------------------------------------------------------------------------

by carsonbot at 2021-02-04T08:38:45Z

Hey!

I see that this is your first PR. That is great! Welcome!

Symfony has a [contribution guide](https://symfony.com/doc/current/contributing/index.html) which I suggest you to read.

In short:
- Always add tests
- Keep backward compatibility (see https://symfony.com/bc).
- Bug fixes must be submitted against the lowest maintained branch where they apply (see https://symfony.com/releases)
- Features and deprecations must be submitted against the 5.x branch.

Review the GitHub status checks of your pull request and try to solve the reported issues. If some tests are failing, try to see if they are failing because of this change.

When two Symfony core team members approve this change, it will be merged and you will become an official Symfony contributor!
If this PR is merged in a lower version branch, it will be merged up to all maintained branches within a few days.

I am going to sit back now and wait for the reviews.

Cheers!

Carsonbot

---------------------------------------------------------------------------

by carsonbot at 2021-02-04T08:38:46Z

Hey!

I did a quick review of this PR, I think most things looks good.

But you have made this PR towards a branch that is not maintained anymore. :/
Could you update the [PR base branch](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/changing-the-base-branch-of-a-pull-request) to target one of these branches instead? 4.4, 5.2.

Cheers!

Carsonbot

---------------------------------------------------------------------------

by nicolas-grekas at 2021-02-04T09:50:22Z

That's for 4.4 I suppose?
Also, don't we miss `auth_checker` in the list?
https://github.com/symfony/symfony/blob/8bd81b518feee07f2ea9dae62e4b66016b7bd924/src/Symfony/Component/Security/Core/Authorization/Voter/ExpressionVoter.php#L116-L132

---------------------------------------------------------------------------

by wickedOne at 2021-02-04T10:00:40Z

you're rigjt, both ``auth_checker`` and ``subject`` appear to be missing from the documentation and the ``auth_checker`` is missing as well in the cache warmer.

how do you suggest to proceed? fix these for the 4.4 branch and have the documentation corrected for both the 4.4 and 5.2 branch (as the ``roles`` attribute was deprecated in 5.0)?

---------------------------------------------------------------------------

by wouterj at 2021-02-04T10:03:31Z

If I'm correct, both `roles` and `role_names` exists in 4.4. So I think we need 2 PRs: one adding the missing vars in 4.4 and after that's merged, another PR removing `roles` in 5.2.

And we indeed need to add the missing vars to the documentation as well.

---------------------------------------------------------------------------

by wickedOne at 2021-02-04T10:04:54Z

ok, i'll update this one and change the base to 4.4

---------------------------------------------------------------------------

by nicolas-grekas at 2021-02-04T10:04:55Z

This PR targetting 4.4 would be enough as we'll be able to adjust for 5.2 when merging up.

---------------------------------------------------------------------------

by wickedOne at 2021-02-04T10:09:43Z

updated and changed target ~(still have to update the docs tho)~

---------------------------------------------------------------------------

by stof at 2021-02-04T10:10:31Z

IIRC, `auth_checker` was not documented because it was meant to be an internal implementation detail (used to implement the `is_granted` function which is what should be used)
