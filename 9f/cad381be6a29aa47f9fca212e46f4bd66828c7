---------------------------------------------------------------------------

by javiereguiluz at 2015-07-03T06:35:16Z

@nicolas-grekas I agree with what you say: 100% HHVM compatibility means that Symfony is 100% compatible to what HHVM is at the moment. It doesn't mean that Symfony executes and behaves exactly the same in HHVM and PHP.

Regarding the *"bugs, issues, errors, [...] of HHVM"*, the [HHVM repository](https://github.com/facebook/hhvm) right now has more than 800 reported issues, so it's fair to say that HHVM has hundreds of issues. But personally I think this is a good thing. I don't know any relevant software project that doesn't contain hundreds of issues (Symfony for instance).

And regarding the issues, lacking features, etc. Symfony code (which includes Monolog, Twig, etc.) contains lots and lots of special code for HHVM:

```php
// InstantiatorTest.php
if (defined('HHVM_VERSION')) {
    $this->markTestSkipped(
        'As of facebook/hhvm#3432, HHVM has no PDORow, and therefore '
        . ' no internal final classes that cannot be instantiated'
    );
}

// Monolog/Formatter/NormalizerFormatterTest.php
public function testExceptionTraceWithArgs()
{
    if (defined('HHVM_VERSION')) {
        $this->markTestSkipped('Not supported in HHVM since it detects errors differently');
    }

    // ...
}

// Symfony\Bundle\FrameworkBundle\Command\ServerCommand.php
abstract class ServerCommand extends ContainerAwareCommand
{
    /**
     * {@inheritdoc}
     */
    public function isEnabled()
    {
        if (version_compare(phpversion(), '5.4.0', '<') || defined('HHVM_VERSION')) {
            return false;
        }

        return parent::isEnabled();
    }

// Symfony\Component\Translation\Loader\IcuDatFileLoader.php
try {
    $rb = new \ResourceBundle($locale, $resource);
} catch (\Exception $e) {
    // HHVM compatibility: constructor throws on invalid resource
    $rb = null;
}

class Twig_Tests_NativeExtensionTest extends PHPUnit_Framework_TestCase
{
    public function testGetProperties()
    {
        if (defined('HHVM_VERSION')) {
            $this->markTestSkipped('Skip under HHVM as the behavior is not the same as plain PHP (which is an edge case anyway)');
        }
        // ..
    }
}
```
